<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <link rel="stylesheet" href="styleGame.css">
</head>
<body>
<h1>Training for memory</h1>
<section class="wrapScore">
  <h3>Time: <span id="timeDown"></span></h3>
  <h3>Score: <span id="score"></span></h3>
</section>
<section id="memoryGame"></section>
<div class="wrapPause">
  <button id="buttonPause">Pause</button>
</div>

<script>
  const memoryGame = document.querySelector('#memoryGame');
  let resultsArray = [];
  let counter = 0;
  //var seconds = 0;
  //var tens = 0;
  //var score = 0;
  //var appendTens = document.getElementById("tens");
  // var appendSeconds = document.getElementById("seconds");
  var buttonPause = document.getElementById('buttonPause');

  var Interval;
  const cardConsts = [
    {'cardName': 'badminton', 'src': 'img/ball/badminton.png'},
    {'cardName': 'badminton', 'src': 'img/ball/badminton.png'},
    {'cardName': 'baseball', 'src': 'img/ball/baseball.png'},
    {'cardName': 'baseball', 'src': 'img/ball/baseball.png'},
    {'cardName': 'basketball', 'src': 'img/ball/basketball.png'},
    {'cardName': 'basketball', 'src': 'img/ball/basketball.png'},
    {'cardName': 'curling-stones', 'src': 'img/ball/curling-stones.png'},
    {'cardName': 'curling-stones', 'src': 'img/ball/curling-stones.png'},
    {'cardName': 'darts', 'src': 'img/ball/darts.png'},
    {'cardName': 'darts', 'src': 'img/ball/darts.png'},
    {'cardName': 'tennis', 'src': 'img/ball/tennis-ball.png'},
    {'cardName': 'tennis', 'src': 'img/ball/tennis-ball.png'},
  ];

  function shuffleField(arr) { // тасование алгоритмом Фишера-Йетса
    let randomInd; // рандомный индекс массива
    let tempVal; //*/
    for (let i = arr.length - 1; i > 0; i--) {
      randomInd = Math.floor(Math.random() * (i + 1)); //генерируем целое число
      tempVal = arr[randomInd]; // меняем местами
      arr[randomInd] = arr[i]; //элемент массива с индексом randomInd
      arr[i] = tempVal; //и текущий элемент массива
    }
    return arr; //на выходе перемешанный массив
  }

  shuffleField(cardConsts);

  for (let i = 0; i < cardConsts.length; i++) {
    const frontFace = document.createElement("div");
    frontFace.classList.add('frontFace');
    frontFace.dataset.cardname = cardConsts[i].cardName;

    const images = document.createElement("img");
    images.classList.add('images');
    images.src = cardConsts[i].src;

    frontFace.appendChild(images);
    memoryGame.appendChild(frontFace);

    frontFace.onclick = function () {
      if (this.classList !== 'flipped' && this.classList !== 'correct') {
        this.classList.toggle('flipped');
        let result = this.dataset.cardname;
        resultsArray.push(result);
        //clearInterval(Interval);
        //Interval = setInterval(startTimer, 10);
      }

      if (resultsArray.length > 1) {
        if (resultsArray[0] === resultsArray[1]) {
          checkCards('correct');
          counter++;
          //winPair();
          resultsArray = [];
        } else {
          checkCards('reverse');
          resultsArray = []; //resultsArray.splice(0)
        }
      }
    }
  }

  window.onload = function () {
    let spanScore = document.getElementById('score');
    let score = 0;
    spanScore.innerHTML = score;
    document.body.onclick = function (EO) {
      EO = EO || document.event;
      let target = EO.target || EO.srcElement;
      if (target.classList !== 'flipped') return;
      score++;
      spanScore.innerHTML = Math.floor(score / 2);
    }
  };

  let checkCards = function (classList) {
    let flipCards = document.querySelectorAll(".flipped");

    setTimeout(function () {
      for (let i = (flipCards.length - 1); i >= 0; i--) {
        flipCards[i].classList.replace('flipped', classList);
      }

    }, 500);

  };

  buttonPause.onclick = function () {
    clearInterval(Interval);
  }
  //-----обратный таймер------
  //time -  массив, минуты секунды
  //call - функция с параметрами, минуты и секунды обратного отсчета
  /*function timer(time, call) {
    timer.lastCall = call;
    timer.lastTime = time;
    timer.timerInterval = setInterval(function () {
      call(time[0], time[1]);
      time[1]--;
      if (time[0] === 0 && time[1] === 0) {
        timer.pause();
        call(0, 0);
        if (time[1] === 0) {
          time[1] = 59;
          time[0]--;
        }
      }
      timer.lastTime = time
    }, 1000)
  }

  timer.pause = function () {
    clearInterval(timer.timerInterval)
  };
  timer.start = function () {
    timer(timer.lastTime, timer.lastCall)
  };

  timer.pause();    // в каком мете применить------------------------------------
  timer.start();    // в каком мете применить------------------------------------
*/


  /*
 let timeDown = [0,0];
  let countTimeDown;
  function startTimer(time, call) {
    if (timeDown){
      clearInterval(timeDown);
      timeDown = 0;
    }
    startTimer.lastCall = call;
    startTimer.lastTime = time;
    startTimer.timerInterval = setInterval(function () {
      call(time[0], time[1]);
      time[1]--;
      if (time[0] === 0 && time[1] === 0) {
        startTimer.pause();
        call(0, 0);

        if (time[1] === 0) {
          time[1] = 59;
          time[0]--;
        }
      }
      timer.lastTime = time
    }, 1000)
  }
  function tickDown() {

  }

   function initGame() {
    startGame = timer([2, 0], function (m, s) {
      document.getElementsByClassName('.timeDown').innerHTML = (m + ':' + s);
    });
    //cardFlipped = 0; // перевернутые карты, добавить счет количество перевернутых карт
    shuffleField(memoryArray);
  }
*/
</script>
</body>
</html>